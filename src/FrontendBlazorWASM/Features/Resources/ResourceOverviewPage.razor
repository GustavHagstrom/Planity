@page "/resources"
@inject NavigationManager NavigationManager
@inject IResourceService ResourceService
@inject IStringLocalizer<ResourceOverviewPage> localizer



<OverviewPageLayout Title="@localizer["Resursöversikt"]">
    <Actions>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => NavigationManager.NavigateTo(Planity.FrontendBlazorWASM.Routes.ResourceNew))" StartIcon="@Icons.Material.Filled.Add">
            @localizer["Ny resurs"]
        </MudButton>
    </Actions>
    <Filters>

    </Filters>
    <MainContent>
        <MudTable Items="@resources" Hover="true" Dense="true">
            <HeaderContent>
                <MudTh>@localizer["Namn"]</MudTh>
                <MudTh>@localizer["Roll"]</MudTh>
                <MudTh></MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd>@context.Name</MudTd>
                <MudTd>@context.Role</MudTd>
                <MudTd>
                    <MudIconButton Icon="@Icons.Material.Filled.Visibility" Color="Color.Primary" Size="Size.Small"
                                   OnClick="@(() => NavigationManager.NavigateTo(Planity.FrontendBlazorWASM.Routes.ResourceDetails(context.Id)))" />
                </MudTd>
            </RowTemplate>
        </MudTable>
    </MainContent>
</OverviewPageLayout>


@code {
    private List<Resource> resources = new();

    protected override async Task OnInitializedAsync()
    {
        resources = await ResourceService.GetResourcesAsync();
    }
}
